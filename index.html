<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Frise Historique Universelle</title>
  <meta name="description" content="Visualisez votre place dans lâ€™histoire de lâ€™univers, de lâ€™apparition des hominidÃ©s Ã  aujourdâ€™hui.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      background: #f9f9f9;
      color: #222;
      transition: background 0.3s, color 0.3s;
    }
    .dark {
      background: #111;
      color: #eee;
    }
    header {
      text-align: center;
      padding: 1.5em;
    }
    main {
      max-width: 700px;
      margin: auto;
      padding: 1em;
      text-align: center;
    }
    input, select, button {
      font-size: 1em;
      padding: 0.5em;
      margin: 0.3em;
      border-radius: 5px;
    }
    canvas {
      display: block;
      margin: 2em auto;
    }
    #result {
      font-size: 1.2em;
      margin-top: 1.5em;
    }
    .controls {
      margin-bottom: 1em;
    }
    .theme-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 0.3em 0.6em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
  <header>
    <h1>Frise Historique Universelle</h1>
    <p>Visualisez lâ€™annÃ©e que vous souhaitez dans une Ã©chelle cosmique ou humaine.</p>
  </header>
  <main>
    <div class="controls">
      <input type="number" id="yearInput" placeholder="Ex: -3000, 2024" />
      <select id="baseSelect" onchange="showPosition()">
        <option value="-13800000000">Depuis le Big Bang</option>
        <option value="-4540000000">Depuis la formation de la Terre</option>
        <option value="-3500000000">Depuis la vie unicellulaire</option>
        <option value="-1000000000">Depuis la vie multicellulaire</option>
        <option value="-6000000">Depuis les hominidÃ©s</option>
        <option value="-300000">Depuis Homo sapiens</option>
        <option value="-10000">Depuis l'agriculture</option>
        <option value="-3300">Depuis lâ€™Ã©criture</option>
      </select>
      <button onclick="showPosition()">Voir</button>
    </div>

    <canvas id="timeline" width="600" height="50"></canvas>
    <div id="result"></div>
  </main>

  <script>
    const today = new Date().getFullYear();
    const canvas = document.getElementById("timeline");
    const ctx = canvas.getContext("2d");

    const events = {
      "-6000000": "Apparition des hominidÃ©s",
      "-2500000": "Premiers outils (palÃ©olithique)",
      "-400000": "Domestication du feu",
      "-300000": "Apparition dâ€™Homo sapiens",
      "-10000": "DÃ©but de lâ€™agriculture",
      "-3300": "Invention de lâ€™Ã©criture",
      "-3000": "Naissance de la civilisation mÃ©sopotamienne",
      "0": "Naissance supposÃ©e de JÃ©sus",
      "476": "Chute de lâ€™Empire romain",
      "1492": "DÃ©couverte de lâ€™AmÃ©rique",
      "1789": "RÃ©volution franÃ§aise",
      "1945": "Fin de la Seconde Guerre mondiale",
      "1969": "Premier homme sur la Lune",
      "1989": "Chute du mur de Berlin"
    };

    function showPosition() {
      const input = parseInt(document.getElementById("yearInput").value);
      const baseYear = parseInt(document.getElementById("baseSelect").value);
      const baseLabel = document.getElementById("baseSelect").selectedOptions[0].text;
      const width = canvas.width;
      const height = canvas.height;

      // Position du marqueur
      const totalRange = today - baseYear;
      const percent = ((input - baseYear) / totalRange);
      const x = Math.max(0, Math.min(percent * width, width - 10));

      // Nettoyage du canvas
      ctx.clearRect(0, 0, width, height);

      // Barre de fond
      ctx.fillStyle = "#ccc";
      ctx.fillRect(50, height / 2 - 5, width - 100, 10);

      // Marqueur de base
      ctx.fillStyle = "#888";
      ctx.font = "12px sans-serif";
      ctx.fillText(baseYear.toLocaleString("fr-FR"), 0, height / 2 + 4);

      // Marqueur rouge
      ctx.fillStyle = "red";
      ctx.fillRect(50 + x, height / 2 - 10, 4, 20);

      // RÃ©sultat
      let message = `L'annÃ©e <strong>${input.toLocaleString("fr-FR")}</strong> reprÃ©sente <strong>${(percent * 100).toFixed(9)}%</strong> depuis <em>${baseLabel.toLowerCase()}</em>.`;

      if (events[input]) {
        message += `<br><strong>Ã‰vÃ©nement :</strong> ${events[input]}`;
      }

      document.getElementById("result").innerHTML = message;
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
    }
  </script>
</body>
</html>
